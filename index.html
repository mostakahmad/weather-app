<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>United Software Solutions - Weather Dashboard</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
      color: #333;
    }

    header {
      background-color: #2c3e50;
      padding: 1rem 2rem;
      text-align: center;
      color: #fff;
      font-size: 1.5rem;
    }

    .container {
      max-width: 800px;
      margin: 2rem auto;
      background: #fff;
      border-radius: 15px;
      padding: 2rem;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
    }

    h2 {
      color: #2c3e50;
      margin-top: 2rem;
    }

    button {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      background-color: #3498db;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }

    button:hover {
      background-color: #2980b9;
    }

    .error {
      color: red;
    }

    .section {
      margin-top: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid #ddd;
    }
  </style>
</head>
<body>
  <header>United Software Solutions</header>
  <div class="container">
    <h1>Weather Dashboard</h1>
    <button onclick="getWeatherData()">Get My Weather Info</button>
    <div id="result"></div>
  </div>

  <script>
    async function getWeatherData() {
      const apiKey = 'ec1bc01a115d4d699a6105622251704'; // Replace with your actual key
      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = 'Getting your location...';

      if (!navigator.geolocation) {
        resultDiv.innerHTML = "<p class='error'>Geolocation not supported.</p>";
        return;
      }

      navigator.geolocation.getCurrentPosition(async (position) => {
        const lat = position.coords.latitude;
        const lon = position.coords.longitude;

        try {
          const [current, forecast, astro, timezone] = await Promise.all([
            fetchJson(`https://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${lat},${lon}`),
            fetchJson(`https://api.weatherapi.com/v1/forecast.json?key=${apiKey}&q=${lat},${lon}&days=3`),
            fetchJson(`https://api.weatherapi.com/v1/astronomy.json?key=${apiKey}&q=${lat},${lon}`),
            fetchJson(`https://api.weatherapi.com/v1/timezone.json?key=${apiKey}&q=${lat},${lon}`)
          ]);

          resultDiv.innerHTML = `
            <div class="section">
              <h2>Location</h2>
              <p><strong>Name:</strong> ${current.location.name}, ${current.location.country}</p>
              <p><strong>Lat/Lon:</strong> ${lat}, ${lon}</p>
            </div>

            <div class="section">
              <h2>Current Weather</h2>
              <p><strong>Temperature:</strong> ${current.current.temp_c} °C</p>
              <p><strong>Feels Like:</strong> ${current.current.feelslike_c} °C</p>
              <p><strong>Condition:</strong> ${current.current.condition.text}</p>
            </div>

            <div class="section">
              <h2>Forecast (Next 3 Days)</h2>
              ${forecast.forecast.forecastday.map(day => `
                <p><strong>${day.date}</strong>: ${day.day.avgtemp_c} °C, ${day.day.condition.text}</p>
              `).join('')}
            </div>

            <div class="section">
              <h2>Astronomy</h2>
              <p><strong>Sunrise:</strong> ${astro.astronomy.astro.sunrise}</p>
              <p><strong>Sunset:</strong> ${astro.astronomy.astro.sunset}</p>
              <p><strong>Moon Phase:</strong> ${astro.astronomy.astro.moon_phase}</p>
            </div>

            <div class="section">
              <h2>Timezone</h2>
              <p><strong>Region:</strong> ${timezone.location.region}</p>
              <p><strong>Timezone ID:</strong> ${timezone.location.tz_id}</p>
              <p><strong>Local Time:</strong> ${timezone.location.localtime}</p>
            </div>
          `;
        } catch (err) {
          resultDiv.innerHTML = `<p class="error">${err.message}</p>`;
        }
      }, (err) => {
        resultDiv.innerHTML = `<p class="error">Geolocation Error: ${err.message}</p>`;
      });
    }

    async function fetchJson(url) {
      const res = await fetch(url);
      if (!res.ok) throw new Error("Failed to fetch: " + url);
      return res.json();
    }
  </script>
</body>
</html>
